import type { ContentFields } from 'contentful-management'
import type { FieldIdMapForContentType } from './types'

export const createFieldHash =
  (fieldIdMapForContentType?: FieldIdMapForContentType) =>
  (field: ContentFields, _index?: number, position?: 'left' | 'right') => {
    // 'left' means that the field comes from the target environment,
    // 'right' comes from the source environment
    const idToCompare =
      (position === 'right' && fieldIdMapForContentType?.source.get(field.id)) ||
      (position === 'left' && fieldIdMapForContentType?.target.get(field.id)) ||
      field.id

    return `${idToCompare}-${field.type}`
  }
